async function sendWork(e){const o=sessionStorage.getItem("authToken");if(o)try{const t=await fetch("http://localhost:5678/api/works",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(e)});if(!t.ok)throw new Error("Erreur");const n=await t.json();console.log("Travail envoyé:",n)}catch(e){console.error("Erreur :",e.message)}else console.error("Aucun token trouvé. Veuillez vous connecter.")}async function deleteWork(e){const o=sessionStorage.getItem("authToken");if(o)try{if(!(await fetch(`http://localhost:5678/api/works/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}})).ok)throw new Error("Erreur lors de la suppression du travail.");console.log("Travail supprimé avec succès.")}catch(e){console.error("Erreur :",e.message)}else console.error("Aucun token trouvé. Veuillez vous connecter.")}document.getElementById("formulaire").addEventListener("submit",(async function(e){e.preventDefault();const o=document.getElementById("email").value,t=document.getElementById("password").value;try{const e=await fetch("http://localhost:5678/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:t})});if(!e.ok)throw new Error("Erreur de connexion : identifiants incorrects.");const n=await e.json();console.log("Données reçues du serveur :",n);const r=n.token;r?(console.log("Token stocké avec succès :",r),sessionStorage.setItem("authToken",r),document.location="index.html"):(console.error("Le token est introuvable."),document.getElementById("message").innerText="Connexion réussie, mais aucun token reçu.")}catch(e){console.error("Erreur lors de la connexion :",e.message);const o=document.getElementById("message");o&&(o.innerText=e.message)}}));